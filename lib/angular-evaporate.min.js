!function(a){"use strict";angular.module("evaporate",[]).provider("eva",function(){var b;this.config=function(a){b=a},this.$get=[function(){return{_:new a(b),urlBase:"http://"+b.bucket+".s3.amazonaws.com/"}}]}).directive("evaporate",["eva",function(a){function b(b,c){function d(){}function e(a,b){for(var c=a.length,d=0;d<c;d++)if(angular.equals(a[d],b))return d;return-1}b.data||(b.data={});var f=b.data,g=f.dir?f.dir+"/":"",h=f.headersCommon||{},i=f.headersSigned||{},j=f.signHeaders||{},k="function"==typeof f.onFileProgress?f.onFileProgress:d,l="function"==typeof f.onFileComplete?f.onFileComplete:d,m="function"==typeof f.onFileError?f.onFileError:d,n="function"==typeof f.onStart?f.onStart:d;f.ready=!1,a._.supported&&(c.bind("change",function(c){n(c.target.files[0]).then(function(d){f.files=[],angular.forEach(c.target.files,function(c){c.started=Date.now(),c.path_=g+d,c.hashName=d,c.url=a.urlBase+c.path_,a._.add({name:c.path_,file:c,contentType:c.type||"binary/octet-stream",notSignedHeadersAtInitiate:h,xAmzHeadersAtInitiate:i,signHeaders:j,complete:function(){c.completed=!0,l(c),b.$apply()},progress:function(a){c.progress=Math.round(1e4*a)/100,c.timeLeft=Math.round((100-c.progress)/c.progress*(Date.now()-c.started)/1e3),k(c),b.$apply()},error:function(a){var d=e(f.files,c);d!==-1&&f.files.splice(d,1),m(c,a),b.$apply()}}),f.files.push(c)}),b.$apply()})}),f.ready=!0)}return{restrict:"A",link:b,scope:{data:"=evaModel"}}}])}(Evaporate);